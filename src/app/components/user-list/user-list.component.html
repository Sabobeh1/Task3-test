<app-header [showSearch]="true" (searchId)="handleSearch($event)"></app-header>

@if (isLoading) {
  <div>
    <p>Loading users...</p>
  </div>
}

@if (errorMessage) {
  <app-error 
    [errorMessage]="errorMessage" 
    [errorDetails]="'There was an issue when contacting the server, please check your internet connection'">
  </app-error>
}

@if (!isLoading && !errorMessage) {
  <div class="container">
    <div class="user-list-container">
      <app-pagination 
        [currentPage]="currentPage" 
        [totalPages]="totalPages"
        [itemsPerPage]="itemsPerPage"
        [itemsPerPageOptions]="itemsPerPageOptions"
        (pageChanged)="onPageChanged($event)"
        (itemsPerPageChanged)="onItemsPerPageChanged($event)">
      </app-pagination>

      <ul class="user-list">
        @for (let user of filteredUsers; track $index) {
          <app-user [user]="user"></app-user> <!-- Ensure app-user binding -->
        }
      </ul>
    </div>
  </div>
}
